   1:			;
   2:			;=======================================================================
   3:			;
   4:			; CP/M 3 Z80 DarkStar (NE Z80) Porting
   5:			;
   6:			;=======================================================================
   7:			;;---------------------------------------------------------------------
   8:			;; Version      : 1.0 - 20140904
   9:			;; Assemble     : SLR z80asm
  10:			;; Revisions:
  11:			;; 20140905	- Code start
  12:			;;---------------------------------------------------------------------
  13:			
  14:				title	'System Control Block Definition for CP/M 3 BIOS'
  15:			
  16:				public	@civec, @covec, @aivec, @aovec, @lovec, @bnkbf
  17:				public	@crdma, @crdsk, @vinfo, @resel, @fx, @usrcd
  18:				public	@mltio, @ermde, @erdsk, @media, @bflgs
  19:				public	@date, @hour, @min, @sec, ?erjmp, @mxtpa
  20:			
  21:			
  22:	FE00'         	scb$base equ	0FE00H		; Base of the SCB
  23:			
  24:	FE22'         	@CIVEC	equ	scb$base+22h	; Console Input Redirection
  25:							; Vector (word, r/w)
  26:	FE24'         	@COVEC	equ	scb$base+24h	; Console Output Redirection
  27:							; Vector (word, r/w)
  28:	FE26'         	@AIVEC	equ	scb$base+26h	; Auxiliary Input Redirection
  29:							; Vector (word, r/w)
  30:	FE28'         	@AOVEC	equ	scb$base+28h	; Auxiliary Output Redirection
  31:							; Vector (word, r/w)
  32:	FE2A'         	@LOVEC	equ	scb$base+2Ah	; List Output Redirection
  33:							; Vector (word, r/w)
  34:	FE35'         	@BNKBF	equ	scb$base+35h	; Address of 128 Byte Buffer
  35:							; for Banked BIOS (word, r/o)
  36:	FE3C'         	@CRDMA	equ	scb$base+3Ch	; Current DMA Address
  37:							; (word, r/o)
  38:	FE3E'         	@CRDSK	equ	scb$base+3Eh	; Current Disk (byte, r/o)
  39:	FE3F'         	@VINFO	equ	scb$base+3Fh	; BDOS Variable "INFO"
  40:							; (word, r/o)
  41:	FE41'         	@RESEL	equ	scb$base+41h	; FCB Flag (byte, r/o)
  42:	FE43'         	@FX	equ	scb$base+43h	; BDOS Function for Error
  43:							; Messages (byte, r/o)
  44:	FE44'         	@USRCD	equ	scb$base+44h	; Current User Code (byte, r/o)
  45:	FE4A'         	@MLTIO	equ	scb$base+4Ah	; Current Multi-Sector Count
  46:							; (byte, r/w)
  47:	FE4B'         	@ERMDE	equ	scb$base+4Bh	; BDOS Error Mode (byte, r/o)
  48:	FE51'         	@ERDSK	equ	scb$base+51h	; BDOS Error Disk (byte, r/o)
  49:	FE54'         	@MEDIA	equ	scb$base+54h	; Set by BIOS to indicate
  50:							; open door (byte, r/w)
  51:	FE57'         	@BFLGS	equ	scb$base+57h	; BDOS Message Size Flag (byte, r/o)
  52:	FE58'         	@DATE	equ	scb$base+58h	; Date in Days Since 1 Jan 78
  53:							; (word, r/w)
  54:	FE5A'         	@HOUR	equ	scb$base+5Ah	; Hour in BCD (byte, r/w)
  55:	FE5B'         	@MIN	equ	scb$base+5Bh	; Minute in BCD (byte, r/w)
  56:	FE5C'         	@SEC	equ	scb$base+5Ch	; Second in BCD (byte, r/w)
  57:	FE5F'         	?ERJMP	equ	scb$base+5Fh	; BDOS Error Message Jump
  58:							; (word, r/w)
  59:	FE62'         	@MXTPA	equ	scb$base+62h	; Top of User TPA
  60:							; (address at 6, 7) (word, r/o)
  61:			
  62:	0000'         		end



Statistics:

     3	passes
     0	jr promotions
    24	symbols
     0	bytes



Symbol Table:

?erjmp         =fe5f      (public)
@aivec         =fe26      (public)
@aovec         =fe28      (public)
@bflgs         =fe57      (public)
@bnkbf         =fe35      (public)
@civec         =fe22      (public)
@covec         =fe24      (public)
@crdma         =fe3c      (public)
@crdsk         =fe3e      (public)
@date          =fe58      (public)
@erdsk         =fe51      (public)
@ermde         =fe4b      (public)
@fx            =fe43      (public)
@hour          =fe5a      (public)
@lovec         =fe2a      (public)
@media         =fe54      (public)
@min           =fe5b      (public)
@mltio         =fe4a      (public)
@mxtpa         =fe62      (public)
@resel         =fe41      (public)
@sec           =fe5c      (public)
@usrcd         =fe44      (public)
@vinfo         =fe3f      (public)
scb$base       =fe00     
